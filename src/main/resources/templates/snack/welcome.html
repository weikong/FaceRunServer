<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>背景图片自适应</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <script type="text/javascript" th:inline="javascript">
        window.onload = function () {
            var url = "/circle/query";
            var request = new XMLHttpRequest();
            request.onload = function () {
                if (request.status == 200) {
                    displayCircleContent(request.responseText)
                }
            };
            request.open("POST", url);
            request.send(null);
        }
        function displayCircleContent(content) {
            var p = document.getElementById("content");
            var dataJson = JSON.parse(content);
            var datas = dataJson.data;
            for (var i = 0; i < datas.length; i++) {
                var div2 = document.createElement("div");     //创建一个div元素
                var h2 = document.createElement("h4");     //创建一个h3元素
                h2.textContent = datas[i].description;
                var bigImg = document.createElement("img");     //创建一个img元素
                var photos = datas[i].photos;
                if (photos != null && photos.trim() != '') {
                    var photoArray = photos.split(",");
                    if (photoArray != null && photoArray.length > 0) {
                        var item = photoArray[0];
                        if (item != null && (item.startsWith("http://") || item.startsWith("https://"))) {
                            bigImg.src = item;   //给img元素的src属性赋值
                        } else {
//                            bigImg.src = "http://localhost:9090/download_file?filename=" + photoArray[0];   //给img元素的src属性赋值
                            bigImg.src = "http://localhost:9090/file/" + photoArray[0]+".";   //给img元素的src属性赋值
                        }
                    }
                }
//                bigImg.src = "http://localhost:9090/download_file?filename=20180205144803-xiyu.jpg";   //给img元素的src属性赋值
                div2.appendChild(bigImg);      //为dom添加子元素img
                div2.appendChild(h2);      //为dom添加子元素h3
                p.appendChild(div2);      //为dom添加子元素h3
            }
        }
    </script>
    <style type="text/css">html, body {
        padding: 0;
        margin: 0;
    }

    div {
        width: 100%;
        height: 100%;
        /*!*background: url('images/slide_01_640x340.jpg') no-repeat;*!*/
        background-size: 100% 100%;
        position: relative;
    }

    /*tr {
        width: 100%;
        height: 100%;
        background:darkgrey;
        !*background: url('images/slide_01_640x340.jpg') no-repeat;*!
    }*/
    span {
        display: table-cell;
        vertical-align: middle
    }

    h4 {
        position: absolute;
        left: 0px;
        right: 0px;
        bottom: -16px;
        color: white;
        background-color: rgba(0, 0, 0, 0.4);
        width: 100%;
        height: auto;
        padding-top: 10px;
        padding-bottom: 10px;
        vertical-align: middle;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    /*图片自适应手机屏幕*/
    img {
        height: auto;
        width: auto \9;
        width: 100%;
    }

    /*视频自适应手机屏幕*/
    video {
        height: auto;
        width: auto \9;
        width: 100%;
    }

    /*视频自适应手机屏幕*/
    table {
        height: auto;
        width: auto \9;
        width: 100%;
    }
    </style>
</head>

<body>

<div id="content">

</div>
<!--<div>-->
<!--<table>-->
<!--<tr>-->
<!--<td th:text="Onions">Onions</td>-->
<!--<td th:text="2.41">2.41</td>-->
<!--</tr>-->
<!--<tr>-->
<!--<td th:text="Onions-2">Onions-2</td>-->
<!--<td th:text="2.41-2">2.41-2</td>-->
<!--</tr>-->
<!--</table>-->
<!--</div>-->
</body>
</html>